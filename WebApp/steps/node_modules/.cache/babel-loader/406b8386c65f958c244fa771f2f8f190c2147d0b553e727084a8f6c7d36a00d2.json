{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Desktop/\\u05EA\\u05DB\\u05E0\\u05D5\\u05EA/davidson/project/DavidsonProject/WebApp/steps/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/Desktop/\\u05EA\\u05DB\\u05E0\\u05D5\\u05EA/davidson/project/DavidsonProject/WebApp/steps/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/User/Desktop/\\u05EA\\u05DB\\u05E0\\u05D5\\u05EA/davidson/project/DavidsonProject/WebApp/steps/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// WalletContext.js\nimport React,{createContext,useContext,useState,useMemo}from'react';import{ethers}from'ethers';import{CONTRACT_ADDRESS,CONTRACT_ABI}from'../utils/SmartContract';import{jsx as _jsx}from\"react/jsx-runtime\";var WalletContext=/*#__PURE__*/createContext();export var WalletProvider=function WalletProvider(_ref){var children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isConnected=_useState2[0],setIsConnected=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),account=_useState4[0],setAccount=_useState4[1];var provider=new ethers.providers.Web3Provider(window.ethereum);var signer=provider.getSigner();var contract=useMemo(function(){return new ethers.Contract(CONTRACT_ADDRESS,CONTRACT_ABI,signer);},[signer]);var checkWalletConnection=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accounts;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!window.ethereum){_context.next=11;break;}_context.prev=1;_context.next=4;return window.ethereum.request({method:'eth_accounts'});case 4:accounts=_context.sent;if(accounts.length>0){setIsConnected(true);setAccount(accounts[0]);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(\"Error checking wallet connection:\",_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function checkWalletConnection(){return _ref2.apply(this,arguments);};}();var values={account:account,isConnected:isConnected,checkWalletConnection:checkWalletConnection,setIsConnected:setIsConnected,setAccount:setAccount};return/*#__PURE__*/_jsx(WalletContext.Provider,{value:values,children:children});};export var useWallet=function useWallet(){return useContext(WalletContext);};","map":{"version":3,"names":["React","createContext","useContext","useState","useMemo","ethers","CONTRACT_ADDRESS","CONTRACT_ABI","jsx","_jsx","WalletContext","WalletProvider","_ref","children","_useState","_useState2","_slicedToArray","isConnected","setIsConnected","_useState3","_useState4","account","setAccount","provider","providers","Web3Provider","window","ethereum","signer","getSigner","contract","Contract","checkWalletConnection","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","accounts","wrap","_callee$","_context","prev","next","request","method","sent","length","t0","console","error","stop","apply","arguments","values","Provider","value","useWallet"],"sources":["C:/Users/User/Desktop/תכנות/davidson/project/DavidsonProject/WebApp/steps/src/utils/WalletContext.js"],"sourcesContent":["// WalletContext.js\r\nimport React, { createContext, useContext, useState, useMemo } from 'react';\r\nimport { ethers } from 'ethers'\r\nimport { CONTRACT_ADDRESS, CONTRACT_ABI } from '../utils/SmartContract';\r\nconst WalletContext = createContext();\r\n\r\nexport const WalletProvider = ({ children }) => {\r\n    const [isConnected, setIsConnected] = useState(false);\r\n    const [account, setAccount] = useState(null);\r\n    const provider = new ethers.providers.Web3Provider(window.ethereum)\r\n    const signer = provider.getSigner()\r\n\r\n    const contract = useMemo(() => {\r\n      return new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signer)\r\n    }, [signer])\r\n  \r\n    const checkWalletConnection = async () => {\r\n        if (window.ethereum) {\r\n          try {\r\n            const accounts = await window.ethereum.request({ method: 'eth_accounts' });\r\n            if (accounts.length > 0) {\r\n              setIsConnected(true);\r\n              setAccount(accounts[0]);\r\n            }\r\n          } catch (error) {\r\n            console.error(\"Error checking wallet connection:\", error);\r\n          }\r\n        }\r\n    };\r\n    \r\n\r\n  const values = {\r\n    account,\r\n    isConnected,\r\n    checkWalletConnection,\r\n    setIsConnected,\r\n    setAccount,\r\n    \r\n  };\r\n\r\n  return (\r\n    <WalletContext.Provider value={values}>\r\n      {children}\r\n    </WalletContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useWallet = () => {\r\n  return useContext(WalletContext);\r\n};\r\n"],"mappings":"wjBAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,OAAO,KAAQ,OAAO,CAC3E,OAASC,MAAM,KAAQ,QAAQ,CAC/B,OAASC,gBAAgB,CAAEC,YAAY,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBACxE,GAAM,CAAAC,aAAa,cAAGT,aAAa,CAAC,CAAC,CAErC,MAAO,IAAM,CAAAU,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACrC,IAAAC,SAAA,CAAsCX,QAAQ,CAAC,KAAK,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA9CG,WAAW,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAClC,IAAAI,UAAA,CAA8BhB,QAAQ,CAAC,IAAI,CAAC,CAAAiB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,GAAM,CAAAG,QAAQ,CAAG,GAAI,CAAAlB,MAAM,CAACmB,SAAS,CAACC,YAAY,CAACC,MAAM,CAACC,QAAQ,CAAC,CACnE,GAAM,CAAAC,MAAM,CAAGL,QAAQ,CAACM,SAAS,CAAC,CAAC,CAEnC,GAAM,CAAAC,QAAQ,CAAG1B,OAAO,CAAC,UAAM,CAC7B,MAAO,IAAI,CAAAC,MAAM,CAAC0B,QAAQ,CAACzB,gBAAgB,CAAEC,YAAY,CAAEqB,MAAM,CAAC,CACpE,CAAC,CAAE,CAACA,MAAM,CAAC,CAAC,CAEZ,GAAM,CAAAI,qBAAqB,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,aACtBjB,MAAM,CAACC,QAAQ,EAAAc,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEQ,CAAAjB,MAAM,CAACC,QAAQ,CAACiB,OAAO,CAAC,CAAEC,MAAM,CAAE,cAAe,CAAC,CAAC,QAApEP,QAAQ,CAAAG,QAAA,CAAAK,IAAA,CACd,GAAIR,QAAQ,CAACS,MAAM,CAAG,CAAC,CAAE,CACvB7B,cAAc,CAAC,IAAI,CAAC,CACpBI,UAAU,CAACgB,QAAQ,CAAC,CAAC,CAAC,CAAC,CACzB,CAACG,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAO,EAAA,CAAAP,QAAA,aAEDQ,OAAO,CAACC,KAAK,CAAC,mCAAmC,CAAAT,QAAA,CAAAO,EAAO,CAAC,CAAC,yBAAAP,QAAA,CAAAU,IAAA,MAAAd,OAAA,gBAGjE,kBAZK,CAAAL,qBAAqBA,CAAA,SAAAC,KAAA,CAAAmB,KAAA,MAAAC,SAAA,OAY1B,CAGH,GAAM,CAAAC,MAAM,CAAG,CACbjC,OAAO,CAAPA,OAAO,CACPJ,WAAW,CAAXA,WAAW,CACXe,qBAAqB,CAArBA,qBAAqB,CACrBd,cAAc,CAAdA,cAAc,CACdI,UAAU,CAAVA,UAEF,CAAC,CAED,mBACEb,IAAA,CAACC,aAAa,CAAC6C,QAAQ,EAACC,KAAK,CAAEF,MAAO,CAAAzC,QAAA,CACnCA,QAAQ,CACa,CAAC,CAE7B,CAAC,CAED,MAAO,IAAM,CAAA4C,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CAC7B,MAAO,CAAAvD,UAAU,CAACQ,aAAa,CAAC,CAClC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}