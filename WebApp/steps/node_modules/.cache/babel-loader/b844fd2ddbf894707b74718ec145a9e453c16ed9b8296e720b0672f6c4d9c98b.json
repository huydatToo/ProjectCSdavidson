{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Desktop/\\u05EA\\u05DB\\u05E0\\u05D5\\u05EA/davidson/project/DavidsonProject/WebApp/steps/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/User/Desktop/\\u05EA\\u05DB\\u05E0\\u05D5\\u05EA/davidson/project/DavidsonProject/WebApp/steps/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/User/Desktop/\\u05EA\\u05DB\\u05E0\\u05D5\\u05EA/davidson/project/DavidsonProject/WebApp/steps/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/User/Desktop/\\u05EA\\u05DB\\u05E0\\u05D5\\u05EA/davidson/project/DavidsonProject/WebApp/steps/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/User/Desktop/\\u05EA\\u05DB\\u05E0\\u05D5\\u05EA/davidson/project/DavidsonProject/WebApp/steps/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import{motion}from'framer-motion';import{useNavigate}from'react-router-dom';import LeftArrowSvg from'../assets/leftArrow.svg';import{useWallet}from'../utils/WalletContext';import HomeSvg from'../assets/home.svg';import ModalChanges from'../components/ModalChanges';import{MetaMaskAvatar}from'react-metamask-avatar';// Project development page component\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ProjectDevelopment(){var navigate=useNavigate();var _useParams=useParams(),projectName=_useParams.projectName;var _useWallet=useWallet(),contract=_useWallet.contract,account=_useWallet.account,isConnected=_useWallet.isConnected,checkWalletConnection=_useWallet.checkWalletConnection;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),ChangeProposals=_useState2[0],setChangeProposals=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),myChanges=_useState4[0],setMyChanges=_useState4[1];var _useState5=useState({open:null,addresses:[],myBalance:null}),_useState6=_slicedToArray(_useState5,2),distribution=_useState6[0],setDistribution=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isModalOpen=_useState8[0],setModalOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),clickedChangeProposal=_useState10[0],setClickedChangeProposal=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),clickedLocalChange=_useState12[0],setClickedLocalChange=_useState12[1];// Function to get change proposals for the project\nfunction getChangeProposals(){return _getChangeProposals.apply(this,arguments);}function _getChangeProposals(){_getChangeProposals=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var changeProposalsTemp;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return contract.getChangesOrProposals(projectName,false);case 2:changeProposalsTemp=_context3.sent;setChangeProposals(changeProposalsTemp);case 4:case\"end\":return _context3.stop();}},_callee3);}));return _getChangeProposals.apply(this,arguments);}function getTimeInSeconds(){return Math.floor(Date.now()/1000);}// Functions to open/close the modal\nfunction openModal(){setModalOpen(true);}function closeModal(){setModalOpen(false);}// Function to get user's changes\nfunction getMyChanges(){return _getMyChanges.apply(this,arguments);}// Function to vote in favor of a change\nfunction _getMyChanges(){_getMyChanges=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var response,data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch('http://127.0.0.1:8000/api/get_my_changes',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:projectName})});case 3:response=_context4.sent;_context4.next=6;return response.json();case 6:data=_context4.sent;setMyChanges(data['my_changes']);_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);console.error('Error:',_context4.t0);case 13:case\"end\":return _context4.stop();}},_callee4,null,[[0,10]]);}));return _getMyChanges.apply(this,arguments);}function voteForChange(){return _voteForChange.apply(this,arguments);}// Function to upload local changes and create a new change proposal\nfunction _voteForChange(){_voteForChange=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return contract.acceptChangeProposal(clickedChangeProposal,projectName);case 2:navigate(\"/project/\".concat(projectName));case 3:case\"end\":return _context5.stop();}},_callee5);}));return _voteForChange.apply(this,arguments);}function uploadChange(){return _uploadChange.apply(this,arguments);}// Function to delete a local change\nfunction _uploadChange(){_uploadChange=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){var response,data;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.prev=0;if(clickedLocalChange){_context6.next=3;break;}return _context6.abrupt(\"return\",-1);case 3:_context6.next=5;return fetch('http://127.0.0.1:8000/api/upload_changes',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:projectName,change_name:clickedLocalChange})});case 5:response=_context6.sent;_context6.next=8;return response.json();case 8:data=_context6.sent;_context6.next=11;return contract.MakeChangeProposal(data['ipfsCID'],projectName);case 11:_context6.next=13;return getChangeProposals();case 13:closeModal();_context6.next=19;break;case 16:_context6.prev=16;_context6.t0=_context6[\"catch\"](0);console.error('Error:',_context6.t0);case 19:case\"end\":return _context6.stop();}},_callee6,null,[[0,16]]);}));return _uploadChange.apply(this,arguments);}function deleteChange(){return _deleteChange.apply(this,arguments);}// Function to save user's local changes\nfunction _deleteChange(){_deleteChange=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(){var response,data;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:_context7.prev=0;if(clickedLocalChange){_context7.next=3;break;}return _context7.abrupt(\"return\",-1);case 3:_context7.next=5;return fetch('http://127.0.0.1:8000/api/delete_change',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:projectName,change_name:clickedLocalChange})});case 5:response=_context7.sent;_context7.next=8;return response.json();case 8:data=_context7.sent;setMyChanges(data['my_changes']);_context7.next=15;break;case 12:_context7.prev=12;_context7.t0=_context7[\"catch\"](0);console.error('Error:',_context7.t0);case 15:case\"end\":return _context7.stop();}},_callee7,null,[[0,12]]);}));return _deleteChange.apply(this,arguments);}function saveChanges(){return _saveChanges.apply(this,arguments);}// Function to get the distribution state\nfunction _saveChanges(){_saveChanges=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(){return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return fetch('http://127.0.0.1:8000/api/save_changes',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:projectName,change_name:clickedLocalChange})});case 3:getMyChanges();_context8.next=9;break;case 6:_context8.prev=6;_context8.t0=_context8[\"catch\"](0);console.error('Error saving changes:',_context8.t0);case 9:case\"end\":return _context8.stop();}},_callee8,null,[[0,6]]);}));return _saveChanges.apply(this,arguments);}function getDistributionState(){return _getDistributionState.apply(this,arguments);}// Function to calculate time until the next distribution\nfunction _getDistributionState(){_getDistributionState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(){var lastDistributionTime,timeInterval,myBalance,myPendingTokens,contributors,projectAddresses,projectAddressesFiltered,_loop,i;return _regeneratorRuntime().wrap(function _callee9$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:_context10.next=2;return contract.getLastDistriubtionTime(projectName);case 2:lastDistributionTime=_context10.sent;_context10.next=5;return contract.TimeLockInterval();case 5:timeInterval=_context10.sent;_context10.next=8;return contract.getDistributionBalanceOf(account,projectName);case 8:myBalance=_context10.sent;_context10.next=11;return contract.getPendingTokens(account,projectName);case 11:myPendingTokens=_context10.sent;myPendingTokens=myPendingTokens.toNumber();timeInterval=timeInterval.toNumber();lastDistributionTime=lastDistributionTime.toNumber();myBalance=myBalance.toNumber();contributors=[];if(!(lastDistributionTime>getTimeInSeconds())){_context10.next=29;break;}_context10.next=20;return contract.getAddresses(projectName);case 20:projectAddresses=_context10.sent;projectAddressesFiltered=_toConsumableArray(new Set(projectAddresses));_loop=/*#__PURE__*/_regeneratorRuntime().mark(function _loop(i){return _regeneratorRuntime().wrap(function _loop$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:contributors.push({address:projectAddressesFiltered[i],sendTo:0,changesOrProposalsCount:projectAddresses.filter(function(element){return element===projectAddresses[i];}).length});case 1:case\"end\":return _context9.stop();}},_loop);});i=0;case 24:if(!(i<projectAddressesFiltered.length)){_context10.next=29;break;}return _context10.delegateYield(_loop(i),\"t0\",26);case 26:i++;_context10.next=24;break;case 29:setDistribution(_objectSpread(_objectSpread({},distribution),{},{myBalance:myBalance,lastDistributionTime:lastDistributionTime,addresses:contributors,timeInterval:timeInterval,myPendingTokens:myPendingTokens}));case 30:case\"end\":return _context10.stop();}},_callee9);}));return _getDistributionState.apply(this,arguments);}function timeForDistribution(){var timeNow=getTimeInSeconds();if(distribution.lastDistributionTime>getTimeInSeconds()){var timeUntilNextDistribution=distribution.lastDistributionTime-timeNow;if(timeUntilNextDistribution>60*60*24){return/*#__PURE__*/_jsx(\"h2\",{children:\"\".concat(Math.floor(timeUntilNextDistribution/(60*60*24)),\" days until distribution ends\")});}else if(timeUntilNextDistribution<60*60*24&&timeUntilNextDistribution>60*60){return/*#__PURE__*/_jsx(\"h2\",{children:\"\".concat(Math.floor(timeUntilNextDistribution/(60*60)),\" hours until distribution ends\")});}else if(timeUntilNextDistribution<60*60&&timeUntilNextDistribution>60){return/*#__PURE__*/_jsx(\"h2\",{children:\"\".concat(Math.floor(timeUntilNextDistribution/60),\" minutes until distribution ends\")});}else{return/*#__PURE__*/_jsx(\"h2\",{children:\"\".concat(Math.floor(timeUntilNextDistribution),\" seconds until distribution ends\")});}}else{return false;}}// Function to distribute tokens\nfunction distribute(){return _distribute.apply(this,arguments);}// Function to update payTo\nfunction _distribute(){_distribute=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(){var amounts,addresses;return _regeneratorRuntime().wrap(function _callee10$(_context11){while(1)switch(_context11.prev=_context11.next){case 0:amounts=distribution.addresses.map(function(usr){return usr.sendTo;});addresses=distribution.addresses.map(function(usr){return usr.address;});addresses=addresses.filter(function(_,index){return amounts[index]!==0;});amounts=amounts.filter(function(element){return element!==0;});if(!(amounts.length+addresses.length>0)){_context11.next=7;break;}_context11.next=7;return contract.distribute(addresses,amounts,projectName);case 7:case\"end\":return _context11.stop();}},_callee10);}));return _distribute.apply(this,arguments);}function updatePayTo(index,change){var changeInBalance=distribution.addresses[index].sendTo-change;if(distribution.myBalance+changeInBalance<0||change<0){return null;}var newDistributionAddresses=_toConsumableArray(distribution.addresses);newDistributionAddresses[index]=_objectSpread(_objectSpread({},newDistributionAddresses[index]),{},{sendTo:change});setDistribution(_objectSpread(_objectSpread({},distribution),{},{myBalance:distribution.myBalance+changeInBalance,addresses:newDistributionAddresses}));}// Initialize the page\nuseEffect(function(){if(isConnected){getChangeProposals();getMyChanges();getDistributionState();}},[checkWalletConnection,isConnected]);// Function to format address\nfunction getFormatAddress(address){var startLength=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var endLength=arguments.length>2&&arguments[2]!==undefined?arguments[2]:4;if(!address)return'';var start=address.substring(0,startLength);var end=address.substring(address.length-endLength);return\"\".concat(start,\"...\").concat(end);}// Function to claim tokens\nvar claimTokens=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return contract.claimPendingTokens(projectName);case 2:_context.next=4;return getDistributionState();case 4:case\"end\":return _context.stop();}},_callee);}));return function claimTokens(){return _ref.apply(this,arguments);};}();// Function to start distribution\nvar startDistribution=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return contract.startDistribution(projectName);case 2:_context2.next=4;return getDistributionState();case 4:case\"end\":return _context2.stop();}},_callee2);}));return function startDistribution(){return _ref2.apply(this,arguments);};}();// returns the page's react component\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"background\",children:[/*#__PURE__*/_jsx(ModalChanges,{isOpen:isModalOpen,closeModal:closeModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modalFlex\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Changes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modalFlex gap\",children:myChanges.map(function(myChange,index){return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){clickedLocalChange!==myChange?setClickedLocalChange(myChange):setClickedLocalChange(false);},className:\"FileLine centerText \".concat(clickedLocalChange===myChange?\"brightBackground\":null),children:/*#__PURE__*/_jsx(\"label\",{className:\"CIDtext FileText\",children:myChange})},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"boxesDownload\",children:[/*#__PURE__*/_jsx(motion.div,{whileTap:{scale:0.9},whileHover:{scale:1.03},initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},exit:{scale:.91},transition:{type:\"spring\",duration:0.6},onClick:function onClick(){closeModal();},className:\"projectHeader HomeButtonDiv\",children:/*#__PURE__*/_jsx(\"img\",{className:\"HomeButton\",src:LeftArrowSvg,alt:\"\"})}),/*#__PURE__*/_jsx(motion.div,{whileTap:{scale:0.9},whileHover:{scale:1.03},initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},exit:{scale:.91},transition:{type:\"spring\",duration:0.6},onClick:function onClick(){uploadChange();},className:\"projectHeader HomeButtonDiv\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Upload\"})}),/*#__PURE__*/_jsx(motion.div,{whileTap:{scale:0.9},whileHover:{scale:1.03},initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},exit:{scale:.91},transition:{type:\"spring\",duration:0.6},onClick:function onClick(){deleteChange();},className:\"projectHeader HomeButtonDiv\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Delete\"})}),/*#__PURE__*/_jsx(motion.div,{whileTap:{scale:0.9},whileHover:{scale:1.03},initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},exit:{scale:.91},transition:{type:\"spring\",duration:0.6},onClick:function onClick(){saveChanges();},className:\"projectHeader HomeButtonDiv\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Save Changes\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"DistributionAndDev\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"onSide\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lineShort\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"projectHeaderLineProposals\",children:[/*#__PURE__*/_jsx(motion.div,{whileTap:{y:6},whileHover:{y:3},initial:{opacity:0},animate:{opacity:1},exit:{scale:.91},transition:{type:\"spring\",duration:0.6},onClick:function onClick(){navigate('/');},className:\"projectHeader HomeButtonDiv\",children:/*#__PURE__*/_jsx(\"img\",{className:\"HomeButton\",src:HomeSvg,alt:\"\"})}),/*#__PURE__*/_jsx(motion.div,{whileTap:{y:6},whileHover:{y:3},initial:{opacity:0},animate:{opacity:1},exit:{scale:.91},transition:{type:\"spring\",duration:0.6},onClick:function onClick(){navigate(\"/project/\".concat(projectName));},className:\"projectHeader HomeButtonDiv\",children:/*#__PURE__*/_jsx(\"img\",{className:\"HomeButton\",src:LeftArrowSvg,alt:\"\"})}),/*#__PURE__*/_jsx(motion.div,{whileTap:{y:6},whileHover:{y:3},initial:{opacity:0},animate:{opacity:1},exit:{scale:.91},transition:{type:\"spring\",duration:0.6},className:\"projectHeader toTheEnd changesButton\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Update\"})}),/*#__PURE__*/_jsx(motion.div,{onClick:function onClick(){openModal();},whileTap:{y:6},whileHover:{y:3},initial:{opacity:0},animate:{opacity:1},exit:{scale:.91},transition:{type:\"spring\",duration:0.6},className:\"projectHeader toTheEnd changesButton\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"My changes\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:ChangeProposals.length>0?\"projectListProposals\":\"projectListProposals ListOfPatchesNo\",children:ChangeProposals.length>0?ChangeProposals.map(function(item,index){return item!==clickedChangeProposal?/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){setClickedChangeProposal(item);},className:\"FileLine gapLine\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"FileText\",children:getFormatAddress(item)}),/*#__PURE__*/_jsx(\"span\",{className:\"FileText\",children:\"|\"}),/*#__PURE__*/_jsx(\"span\",{className:\"FileText\",children:\"Change Proposal\"})]}):/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){setClickedChangeProposal(false);},className:\"clickChangeProposal\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){e.stopPropagation();voteForChange();},className:\"FileText buttonFileLine\",children:\"Vote\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){e.stopPropagation();navigate(\"/project/\".concat(projectName,\"/changeProposal/\").concat(item));},className:\"FileText buttonFileLine\",children:\"Watch the change proposal\"})]});}):/*#__PURE__*/_jsx(\"h1\",{className:\"ListOfPatchesNoText\",children:\"[ Change Proposals ]\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lineShorter\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"distributionData\",children:[timeForDistribution(),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Distribution Balance: \",distribution.myBalance]}),/*#__PURE__*/_jsxs(\"h3\",{children:[distribution.myPendingTokens,\" Unclaimed Tokens\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"distribution\",children:distribution.lastDistributionTime>getTimeInSeconds()?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"div\",{className:\"payTokens\",children:distribution.addresses.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"payTokensDiv\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payTokensDetails\",children:[/*#__PURE__*/_jsx(MetaMaskAvatar,{className:\"\",address:item.address,size:40}),/*#__PURE__*/_jsxs(\"div\",{className:\"justDetails\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"\",children:getFormatAddress(item.address,5,3)}),/*#__PURE__*/_jsxs(\"span\",{className:\"\",children:[\"Changes: \",item.changesOrProposalsCount]})]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"payTokensIncrementor\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"incDec\",onClick:function onClick(){updatePayTo(index,distribution.addresses[index].sendTo-1);},children:\"-\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return updatePayTo(index,e.target.value);},type:\"number\",value:item.sendTo}),/*#__PURE__*/_jsx(\"h3\",{className:\"incDec\",onClick:function onClick(){updatePayTo(index,distribution.addresses[index].sendTo+1);},children:\"+\"})]})]},index);})})}),/*#__PURE__*/_jsx(\"h2\",{onClick:function onClick(){distribute();},className:\"distributeButton\",children:\"Distribute\"})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"center\",children:[/*#__PURE__*/_jsx(\"h1\",{onClick:function onClick(){claimTokens();},className:\"StartDistributeButtonOrClaim\",children:\"Claim Tokens\"}),/*#__PURE__*/_jsx(\"h1\",{onClick:function onClick(){startDistribution();},className:\"StartDistributeButtonOrClaim\",children:\"Start Distribution\"})]})})})]})]})})]});}export default ProjectDevelopment;","map":{"version":3,"names":["React","useEffect","useState","useParams","motion","useNavigate","LeftArrowSvg","useWallet","HomeSvg","ModalChanges","MetaMaskAvatar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProjectDevelopment","navigate","_useParams","projectName","_useWallet","contract","account","isConnected","checkWalletConnection","_useState","_useState2","_slicedToArray","ChangeProposals","setChangeProposals","_useState3","_useState4","myChanges","setMyChanges","_useState5","open","addresses","myBalance","_useState6","distribution","setDistribution","_useState7","_useState8","isModalOpen","setModalOpen","_useState9","_useState10","clickedChangeProposal","setClickedChangeProposal","_useState11","_useState12","clickedLocalChange","setClickedLocalChange","getChangeProposals","_getChangeProposals","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee3","changeProposalsTemp","wrap","_callee3$","_context3","prev","next","getChangesOrProposals","sent","stop","getTimeInSeconds","Math","floor","Date","now","openModal","closeModal","getMyChanges","_getMyChanges","_callee4","response","data","_callee4$","_context4","fetch","method","headers","body","JSON","stringify","name","json","t0","console","error","voteForChange","_voteForChange","_callee5","_callee5$","_context5","acceptChangeProposal","concat","uploadChange","_uploadChange","_callee6","_callee6$","_context6","abrupt","change_name","MakeChangeProposal","deleteChange","_deleteChange","_callee7","_callee7$","_context7","saveChanges","_saveChanges","_callee8","_callee8$","_context8","getDistributionState","_getDistributionState","_callee9","lastDistributionTime","timeInterval","myPendingTokens","contributors","projectAddresses","projectAddressesFiltered","_loop","i","_callee9$","_context10","getLastDistriubtionTime","TimeLockInterval","getDistributionBalanceOf","getPendingTokens","toNumber","getAddresses","_toConsumableArray","Set","_loop$","_context9","push","address","sendTo","changesOrProposalsCount","filter","element","length","delegateYield","_objectSpread","timeForDistribution","timeNow","timeUntilNextDistribution","children","distribute","_distribute","_callee10","amounts","_callee10$","_context11","map","usr","_","index","updatePayTo","change","changeInBalance","newDistributionAddresses","getFormatAddress","startLength","undefined","endLength","start","substring","end","claimTokens","_ref","_callee","_callee$","_context","claimPendingTokens","startDistribution","_ref2","_callee2","_callee2$","_context2","className","isOpen","myChange","onClick","div","whileTap","scale","whileHover","initial","opacity","animate","exit","transition","type","duration","src","alt","y","item","e","stopPropagation","size","class","onChange","target","value"],"sources":["C:/Users/User/Desktop/תכנות/davidson/project/DavidsonProject/WebApp/steps/src/pages/ProjectDevelopment.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport LeftArrowSvg from '../assets/leftArrow.svg';\r\nimport { useWallet } from '../utils/WalletContext';\r\nimport HomeSvg from '../assets/home.svg';\r\nimport ModalChanges from '../components/ModalChanges';\r\nimport { MetaMaskAvatar } from 'react-metamask-avatar';\r\n\r\n// Project development page component\r\nfunction ProjectDevelopment() {\r\n  const navigate = useNavigate();\r\n  const { projectName } = useParams();\r\n  const { contract, account, isConnected, checkWalletConnection } = useWallet();\r\n  const [ChangeProposals, setChangeProposals] = useState([]);\r\n  const [myChanges, setMyChanges] = useState([]);\r\n  const [distribution, setDistribution] = useState({\r\n    open: null,\r\n    addresses: [],\r\n    myBalance: null,\r\n  });\r\n  const [isModalOpen, setModalOpen] = useState(false);\r\n  const [clickedChangeProposal, setClickedChangeProposal] = useState(false);\r\n  const [clickedLocalChange, setClickedLocalChange] = useState(false);\r\n\r\n  // Function to get change proposals for the project\r\n  async function getChangeProposals() {\r\n    const changeProposalsTemp = await contract.getChangesOrProposals(projectName, false);\r\n    setChangeProposals(changeProposalsTemp);\r\n  }\r\n\r\n  function getTimeInSeconds() {\r\n    return Math.floor(Date.now() / 1000);\r\n  }\r\n\r\n  // Functions to open/close the modal\r\n  function openModal() {\r\n    setModalOpen(true);\r\n  }\r\n\r\n  function closeModal() {\r\n    setModalOpen(false);\r\n  }\r\n\r\n  // Function to get user's changes\r\n  async function getMyChanges() {\r\n    try {\r\n      const response = await fetch('http://127.0.0.1:8000/api/get_my_changes', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ name: projectName }),\r\n      });\r\n      const data = await response.json();\r\n      setMyChanges(data['my_changes']);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n    }\r\n  }\r\n\r\n  // Function to vote in favor of a change\r\n  async function voteForChange() {\r\n    await contract.acceptChangeProposal(clickedChangeProposal, projectName);\r\n    navigate(`/project/${projectName}`);\r\n  }\r\n\r\n  // Function to upload local changes and create a new change proposal\r\n  async function uploadChange() {\r\n    try {\r\n      if (!clickedLocalChange) {\r\n        return -1;\r\n      }\r\n\r\n      const response = await fetch('http://127.0.0.1:8000/api/upload_changes', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ name: projectName, change_name: clickedLocalChange }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      await contract.MakeChangeProposal(data['ipfsCID'], projectName);\r\n      await getChangeProposals();\r\n      closeModal();\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n    }\r\n  }\r\n\r\n  // Function to delete a local change\r\n  async function deleteChange() {\r\n    try {\r\n      if (!clickedLocalChange) {\r\n        return -1;\r\n      }\r\n\r\n      const response = await fetch('http://127.0.0.1:8000/api/delete_change', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ name: projectName, change_name: clickedLocalChange }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      setMyChanges(data['my_changes']);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n    }\r\n  }\r\n\r\n  // Function to save user's local changes\r\n  async function saveChanges() {\r\n    try {\r\n      await fetch('http://127.0.0.1:8000/api/save_changes', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ name: projectName, change_name: clickedLocalChange }),\r\n      });\r\n\r\n      getMyChanges();\r\n    } catch (error) {\r\n      console.error('Error saving changes:', error);\r\n    }\r\n  }\r\n\r\n  // Function to get the distribution state\r\n  async function getDistributionState() {\r\n    var lastDistributionTime = await contract.getLastDistriubtionTime(projectName);\r\n    var timeInterval = await contract.TimeLockInterval();\r\n    var myBalance = await contract.getDistributionBalanceOf(account, projectName);\r\n    var myPendingTokens = await contract.getPendingTokens(account, projectName)\r\n    \r\n    myPendingTokens = myPendingTokens.toNumber()\r\n    timeInterval = timeInterval.toNumber()\r\n    lastDistributionTime = lastDistributionTime.toNumber()\r\n    myBalance = myBalance.toNumber()\r\n    \r\n    let contributors = [];\r\n    if (lastDistributionTime > getTimeInSeconds()) {\r\n      const projectAddresses = await contract.getAddresses(projectName);\r\n      const projectAddressesFiltered = [...new Set(projectAddresses)];\r\n\r\n      for (let i = 0; i < projectAddressesFiltered.length; i++) {\r\n        contributors.push({\r\n          address: projectAddressesFiltered[i],\r\n          sendTo: 0,\r\n          changesOrProposalsCount: projectAddresses.filter((element) => element === projectAddresses[i]).length,\r\n        });\r\n      }\r\n    }\r\n\r\n    setDistribution({\r\n      ...distribution,\r\n      myBalance: myBalance,\r\n      lastDistributionTime: lastDistributionTime,\r\n      addresses: contributors,\r\n      timeInterval: timeInterval,\r\n      myPendingTokens: myPendingTokens\r\n    });\r\n  }\r\n\r\n  // Function to calculate time until the next distribution\r\n  function timeForDistribution() {\r\n    const timeNow = getTimeInSeconds();\r\n    if (distribution.lastDistributionTime > getTimeInSeconds()) {\r\n      const timeUntilNextDistribution = distribution.lastDistributionTime - timeNow;\r\n      if (timeUntilNextDistribution > 60 * 60 * 24) {\r\n        return <h2>{`${Math.floor(timeUntilNextDistribution / (60 * 60 * 24))} days until distribution ends`}</h2>\r\n      } else if (timeUntilNextDistribution < 60 * 60 * 24 && timeUntilNextDistribution > 60 * 60) {\r\n        return <h2>{`${Math.floor(timeUntilNextDistribution / (60 * 60))} hours until distribution ends`}</h2>\r\n      } else if (timeUntilNextDistribution < 60 * 60 && timeUntilNextDistribution > 60) {\r\n        return <h2>{`${Math.floor(timeUntilNextDistribution / (60))} minutes until distribution ends`}</h2>\r\n      } else {\r\n        return <h2>{`${Math.floor(timeUntilNextDistribution)} seconds until distribution ends`}</h2>\r\n      }\r\n      } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Function to distribute tokens\r\n  async function distribute() {\r\n    var amounts = distribution.addresses.map((usr) => usr.sendTo);\r\n    var addresses = distribution.addresses.map((usr) => usr.address);\r\n\r\n    addresses = addresses.filter((_, index) => amounts[index] !== 0);\r\n    amounts = amounts.filter((element) => element !== 0);\r\n\r\n    if (amounts.length + addresses.length > 0) {\r\n      await contract.distribute(addresses, amounts, projectName);\r\n    }\r\n  }\r\n\r\n  // Function to update payTo\r\n  function updatePayTo(index, change) {\r\n    const changeInBalance = distribution.addresses[index].sendTo - change;\r\n\r\n    if (distribution.myBalance + changeInBalance < 0 || change < 0) {\r\n      return null;\r\n    }\r\n\r\n    const newDistributionAddresses = [...distribution.addresses];\r\n    newDistributionAddresses[index] = { ...newDistributionAddresses[index], sendTo: change };\r\n\r\n    setDistribution({ ...distribution, myBalance: distribution.myBalance + changeInBalance, addresses: newDistributionAddresses });\r\n  }\r\n\r\n  // Initialize the page\r\n  useEffect(() => {\r\n    if (isConnected) {\r\n      getChangeProposals();\r\n      getMyChanges();\r\n      getDistributionState();\r\n    }\r\n  }, [checkWalletConnection, isConnected]);\r\n\r\n  // Function to format address\r\n  function getFormatAddress(address, startLength = 10, endLength = 4) {\r\n    if (!address) return '';\r\n\r\n    const start = address.substring(0, startLength);\r\n    const end = address.substring(address.length - endLength);\r\n\r\n    return `${start}...${end}`;\r\n  }\r\n\r\n  // Function to claim tokens\r\n  const claimTokens = async() => {\r\n    await contract.claimPendingTokens(projectName);\r\n    await getDistributionState();\r\n  }\r\n\r\n  // Function to start distribution\r\n  const startDistribution = async() => {\r\n    await contract.startDistribution(projectName);\r\n    await getDistributionState();\r\n  }\r\n\r\n    // returns the page's react component\r\n    return (\r\n        <div className='background'>\r\n        <ModalChanges isOpen={isModalOpen} closeModal={closeModal}>\r\n        <div className='modalFlex'>\r\n          <div className=''>\r\n            <h1>My Changes</h1>\r\n            <div className='modalFlex gap'>\r\n            {myChanges.map((myChange, index) => (\r\n              <div onClick={() => {clickedLocalChange !== myChange ? setClickedLocalChange(myChange) : setClickedLocalChange(false)}} className={`FileLine centerText ${clickedLocalChange === myChange ? \"brightBackground\" : null}`} key={index}>\r\n                <label className='CIDtext FileText'>{myChange}</label>\r\n              </div>\r\n            ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className='boxesDownload'>\r\n            <motion.div whileTap={{scale: 0.9}} whileHover={{scale: 1.03}} initial={{ opacity: 0, scale: 0.8 }} animate={{ opacity: 1, scale: 1 }} exit={{scale: .91 }} transition={{ type: \"spring\", duration: 0.6 }} onClick={() => {closeModal()}} className='projectHeader HomeButtonDiv'>\r\n            <img className=\"HomeButton\" src={LeftArrowSvg } alt=\"\" />\r\n            </motion.div>\r\n\r\n            <motion.div whileTap={{scale: 0.9}} whileHover={{scale: 1.03}} initial={{ opacity: 0, scale: 0.8 }} animate={{ opacity: 1, scale: 1 }} exit={{scale: .91 }} transition={{ type: \"spring\", duration: 0.6 }} onClick={() => {uploadChange()}} className='projectHeader HomeButtonDiv'>\r\n            <h1>Upload</h1>\r\n            </motion.div>\r\n\r\n            <motion.div whileTap={{scale: 0.9}} whileHover={{scale: 1.03}} initial={{ opacity: 0, scale: 0.8 }} animate={{ opacity: 1, scale: 1 }} exit={{scale: .91 }} transition={{ type: \"spring\", duration: 0.6 }} onClick={() => {deleteChange()}} className='projectHeader HomeButtonDiv'>\r\n            <h1>Delete</h1>\r\n            </motion.div>\r\n\r\n            <motion.div whileTap={{scale: 0.9}} whileHover={{scale: 1.03}} initial={{ opacity: 0, scale: 0.8 }} animate={{ opacity: 1, scale: 1 }} exit={{scale: .91 }} transition={{ type: \"spring\", duration: 0.6 }} onClick={() => {saveChanges()}} className='projectHeader HomeButtonDiv'>\r\n            <h1>Save Changes</h1>\r\n            </motion.div>\r\n\r\n          </div>\r\n        </div>\r\n        </ModalChanges>\r\n        \r\n        <div className='DistributionAndDev'>\r\n          <div className='onSide'>\r\n          <div className='lineShort'>\r\n            <div className='projectHeaderLineProposals'>\r\n                <motion.div whileTap={{y: 6}} whileHover={{y: 3}} initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{scale: .91 }} transition={{ type: \"spring\", duration: 0.6 }} onClick={() => {navigate('/')}} className='projectHeader HomeButtonDiv'>\r\n                    <img className=\"HomeButton\" src={HomeSvg} alt=\"\" />\r\n                </motion.div>\r\n\r\n                <motion.div whileTap={{y: 6}} whileHover={{y: 3}} initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{scale: .91 }} transition={{ type: \"spring\", duration: 0.6 }} onClick={() => {navigate(`/project/${projectName}`)}} className='projectHeader HomeButtonDiv'>\r\n                    <img className=\"HomeButton\" src={LeftArrowSvg} alt=\"\" />\r\n                </motion.div>\r\n\r\n                <motion.div whileTap={{y: 6}} whileHover={{y: 3}} initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{scale: .91 }} transition={{ type: \"spring\", duration: 0.6 }} className='projectHeader toTheEnd changesButton'>\r\n                    <h1>Update</h1>\r\n                </motion.div>\r\n\r\n                <motion.div onClick={() => {openModal()}} whileTap={{y: 6}} whileHover={{y: 3}} initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{scale: .91 }} transition={{ type: \"spring\", duration: 0.6 }} className='projectHeader toTheEnd changesButton'>\r\n                    <h1>My changes</h1>\r\n                </motion.div>\r\n            </div>\r\n\r\n            <div className={ChangeProposals.length > 0 ? \"projectListProposals\" : \"projectListProposals ListOfPatchesNo\"}> \r\n            {ChangeProposals.length > 0 ? ChangeProposals.map((item, index) => (\r\n                (item !== clickedChangeProposal ?\r\n                <div onClick={() => {setClickedChangeProposal(item)}} className='FileLine gapLine'>\r\n                <span className='FileText'>{getFormatAddress(item)}</span>\r\n                <span className='FileText'>|</span>\r\n                <span className='FileText'>Change Proposal</span>\r\n                </div> : \r\n                <div onClick={() => {setClickedChangeProposal(false)}} className='clickChangeProposal'>\r\n                  <span onClick={(e) => {e.stopPropagation(); voteForChange()}} className='FileText buttonFileLine'>Vote</span>\r\n                  <span onClick={(e) => {e.stopPropagation(); navigate(`/project/${projectName}/changeProposal/${item}`)}} className='FileText buttonFileLine'>Watch the change proposal</span>\r\n                </div>\r\n                ))) : <h1 className='ListOfPatchesNoText'>[ Change Proposals ]</h1>}\r\n            </div>\r\n          </div>\r\n          \r\n          <div className='lineShorter'>\r\n\r\n            <div className='distributionData'>\r\n                {timeForDistribution()}\r\n                <h3>Distribution Balance: {distribution.myBalance}</h3>\r\n                <h3>{distribution.myPendingTokens} Unclaimed Tokens</h3>\r\n            </div>\r\n\r\n            <div className='distribution'> \r\n              {distribution.lastDistributionTime > getTimeInSeconds() ? (\r\n              <>\r\n              <div className=''>\r\n              <div className='payTokens'>\r\n                  {distribution.addresses.map((item, index) => (\r\n                  <div key={index} className='payTokensDiv'>\r\n                    <div className='payTokensDetails'>\r\n                    <MetaMaskAvatar className='' address={item.address} size={40} />\r\n                    <div className='justDetails'>\r\n                    <span className=''>{getFormatAddress(item.address, 5, 3)}</span>\r\n                    <span className=''>Changes: {item.changesOrProposalsCount}</span>\r\n                    </div>\r\n                    </div>\r\n\r\n\r\n                    <div class=\"payTokensIncrementor\">\r\n                      <h3 className='incDec' onClick={() => {updatePayTo(index, distribution.addresses[index].sendTo - 1)}}>-</h3>\r\n                      <input onChange={(e) => updatePayTo(index, e.target.value)} type=\"number\" value={item.sendTo}/>\r\n                      <h3 className='incDec' onClick={() => {updatePayTo(index, distribution.addresses[index].sendTo + 1)}}>+</h3>\r\n                    </div>\r\n\r\n                  </div>\r\n                  ))}\r\n              </div>\r\n              </div>\r\n              <h2 onClick={() => {distribute()}} className='distributeButton'>Distribute</h2>\r\n              </>\r\n              ) : (\r\n              <>\r\n              <div className='center'>\r\n                <h1 onClick={() => {claimTokens()}} className='StartDistributeButtonOrClaim'>Claim Tokens</h1>\r\n                <h1 onClick={() => {startDistribution()}} className='StartDistributeButtonOrClaim'>Start Distribution</h1>\r\n              </div>\r\n              </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProjectDevelopment;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}